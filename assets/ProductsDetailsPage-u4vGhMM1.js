import{_ as b,u as k,r as l,o as P,g as C,a as y,b as n,c as d,d as t,F as M,e as D,t as s,f,w as v,h as x,i as E,n as F}from"./index-UNakMJ-m.js";import{F as B}from"./FormModal-67yC7F9U.js";const w={name:"ProductDetailsView",components:{FormModal:B},setup(){const r=E(),e=k(),i=l({}),o=l(""),m=l(0),c=l(!1),u=a=>{o.value=a},_=()=>{c.value=!c.value},p=()=>{fetch(`https://dummyjson.com/products/${i.value.id}`,{method:"DELETE"}).then(a=>a.json()).then(()=>{r.commit("delete",i.value.id),e.push("/")}).catch(a=>{console.error("Error deleting product:",a)})};return P(async()=>{const a=parseInt(e.currentRoute.value.params.id)||0,h=r.state.products.find(g=>g.id===a)||{};i.value=h,o.value=h.images?h.images[0]:"",m.value=C(i.value.price,i.value.discountPercentage)}),{product:i,currentPhoto:o,actualPrice:m,isModalOpen:c,handlePhotoClick:u,handleDeleteClick:p,toggleModal:_}}},R={class:"details"},S={class:"details__main"},V={class:"details__main__photos"},j={class:"details__main__photos__block"},L=["src","onClick"],N={class:"details__main__main-photo"},O=["src"],z={class:"details__main-info-position"},I={class:"details__main__info"},T={class:"details__main__title"},U={class:"details__main__info-description"},W={class:"details__main__info__category"},q=t("p",{class:"details__main__info__category-text"},"Category:",-1),A={class:"details__main__info__category-value"},G={class:"details__main__info__brand"},H=t("p",{class:"details__main__info__brand-text"},"Brand:",-1),J={class:"details__main__info__brand-value"},K={class:"details__main__info__rating"},Q=t("p",{class:"details__main__info__rating-text"},"Rating:",-1),X={class:"details__main__info__rating-value"},Y={class:"details__main__info__stock"},Z=t("p",{class:"details__main__info__stock-text"},"Stock:",-1),$={class:"details__main__info__stock-value"},tt={class:"details__main__info__price"},ot=t("p",{class:"details__main__info__price-text"},"Price:",-1),_t={class:"details__main__info__price-prices"},st={key:0,class:"details__main__info__price-prices-old"},et={class:"details__main__info__price-prices-discount"},it={class:"details__bottom__buttons"};function at(r,e,i,o,m,c){const u=y("FormModal");return n(),d("article",R,[t("div",S,[t("div",V,[t("div",j,[(n(!0),d(M,null,D(o.product.images,_=>(n(),d("div",{key:_,class:F(["details__main__photos__block__container",{"details__main__photos__block__container--active":o.currentPhoto===_}])},[t("img",{src:_,alt:"More photos",class:"details__main__photos__block__container-item",onClick:p=>o.handlePhotoClick(_)},null,8,L)],2))),128))]),t("div",N,[t("img",{src:o.currentPhoto,alt:"Product photo",class:"details__main__main-photo-img"},null,8,O)])]),t("div",z,[t("div",I,[t("h3",T,s(o.product.title),1),t("p",U,s(o.product.description),1),t("div",W,[q,t("p",A,s(o.product.category),1)]),t("div",G,[H,t("p",J,s(o.product.brand),1)]),t("div",K,[Q,t("p",X,s(o.product.rating),1)]),t("div",Y,[Z,t("p",$,s(o.product.stock),1)]),t("div",tt,[ot,t("div",_t,[o.product.price!==o.actualPrice?(n(),d("p",st,s(`$${o.product.price}`),1)):f("",!0),t("p",et,s(`$${o.actualPrice}`),1)])])]),t("div",it,[t("button",{type:"button",class:"details__bottom__buttons-button",onClick:e[0]||(e[0]=v((..._)=>o.toggleModal&&o.toggleModal(..._),["prevent"]))}," Update "),t("button",{type:"button",class:"details__bottom__buttons-button details__bottom__buttons-button--delete",onClick:e[1]||(e[1]=v((..._)=>o.handleDeleteClick&&o.handleDeleteClick(..._),["prevent"]))}," Delete ")])])]),o.isModalOpen?(n(),x(u,{key:0,product:o.product,isEditing:!0,onClose:o.toggleModal},null,8,["product","onClose"])):f("",!0)])}const lt=b(w,[["render",at]]);export{lt as default};
